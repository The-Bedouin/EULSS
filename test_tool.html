<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Functionality Test - EULSS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-button {
      background: #001851;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }
    .test-button:hover {
      background: #003366;
    }
    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
    }
    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    .warning {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .test-item {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #001851;
    }
    .test-item h4 {
      margin: 0 0 10px 0;
      color: #001851;
    }
    .test-item p {
      margin: 5px 0;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>üõ†Ô∏è Tool Functionality Test</h1>
  
  <div class="test-section">
    <h2>üìã Test Overview</h2>
    <p>This page tests all the key functionality of the Hindu Recall tool to ensure everything works properly.</p>
    
    <div class="test-grid">
      <div class="test-item">
        <h4>‚úÖ Demo Mode</h4>
        <p>Tests demo activation and dashboard redirect</p>
      </div>
      <div class="test-item">
        <h4>üìö Subject Management</h4>
        <p>Tests creating, viewing, and deleting subjects</p>
      </div>
      <div class="test-item">
        <h4>üìù Concept Management</h4>
        <p>Tests adding, editing, and deleting concepts</p>
      </div>
      <div class="test-item">
        <h4>üÉè Flashcard System</h4>
        <p>Tests flashcard creation, navigation, and study features</p>
      </div>
      <div class="test-item">
        <h4>üíæ Data Persistence</h4>
        <p>Tests localStorage and data synchronization</p>
      </div>
      <div class="test-item">
        <h4>üîç Search Functionality</h4>
        <p>Tests concept filtering and search features</p>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>üß™ Automated Tests</h2>
    <button class="test-button" onclick="runAllTests()">Run All Tests</button>
    <button class="test-button" onclick="clearTestResults()">Clear Results</button>
    <div id="testResults"></div>
  </div>

  <div class="test-section">
    <h2>üîß Manual Tests</h2>
    
    <div class="test-item">
      <h4>1. Demo Mode Test</h4>
      <p>Click the button below to test demo mode activation:</p>
      <button class="test-button" onclick="testDemoMode()">Test Demo Mode</button>
      <div id="demoTestResult"></div>
    </div>

    <div class="test-item">
      <h4>2. Navigation Test</h4>
      <p>Test navigation between pages:</p>
      <button class="test-button" onclick="window.location.href='resources.html'">Go to Resources</button>
      <button class="test-button" onclick="window.location.href='dashboard.html'">Go to Dashboard</button>
    </div>

    <div class="test-item">
      <h4>3. Local Storage Test</h4>
      <p>Check current localStorage state:</p>
      <button class="test-button" onclick="checkLocalStorage()">Check Storage</button>
      <div id="storageTestResult"></div>
    </div>

    <div class="test-item">
      <h4>4. Sample Data Test</h4>
      <p>Load sample data for testing:</p>
      <button class="test-button" onclick="loadSampleData()">Load Sample Data</button>
      <div id="sampleDataResult"></div>
    </div>
  </div>

  <div class="test-section">
    <h2>üìä Test Results Summary</h2>
    <div id="testSummary"></div>
  </div>

  <script>
    let testResults = [];

    function runAllTests() {
      testResults = [];
      const resultsDiv = document.getElementById('testResults');
      resultsDiv.innerHTML = '<div class="status info">Running tests...</div>';

      // Test 1: Demo Mode
      testDemoFunctionality();
      
      // Test 2: Local Storage
      testLocalStorage();
      
      // Test 3: Sample Data
      testSampleData();
      
      // Test 4: Navigation
      testNavigation();
      
      // Display results
      setTimeout(() => {
        displayTestResults();
      }, 1000);
    }

    function testDemoFunctionality() {
      try {
        // Test demo mode activation
        localStorage.setItem('demoMode', 'true');
        const demoMode = localStorage.getItem('demoMode');
        
        if (demoMode === 'true') {
          testResults.push({
            name: 'Demo Mode Activation',
            status: 'PASS',
            message: 'Demo mode can be activated successfully'
          });
        } else {
          testResults.push({
            name: 'Demo Mode Activation',
            status: 'FAIL',
            message: 'Demo mode activation failed'
          });
        }
      } catch (error) {
        testResults.push({
          name: 'Demo Mode Activation',
          status: 'ERROR',
          message: `Error: ${error.message}`
        });
      }
    }

    function testLocalStorage() {
      try {
        // Test localStorage functionality
        const testData = { test: 'data' };
        localStorage.setItem('testKey', JSON.stringify(testData));
        const retrieved = JSON.parse(localStorage.getItem('testKey'));
        
        if (retrieved.test === 'data') {
          testResults.push({
            name: 'Local Storage',
            status: 'PASS',
            message: 'Local storage is working correctly'
          });
        } else {
          testResults.push({
            name: 'Local Storage',
            status: 'FAIL',
            message: 'Local storage data retrieval failed'
          });
        }
        
        // Clean up
        localStorage.removeItem('testKey');
      } catch (error) {
        testResults.push({
          name: 'Local Storage',
          status: 'ERROR',
          message: `Error: ${error.message}`
        });
      }
    }

    function testSampleData() {
      try {
        const sampleData = {
          'Test Subject': [
            {
              id: Date.now(),
              topic: 'Test Topic',
              subtopic: 'Test Subtopic',
              caseSection: 'Test Case',
              content: 'Test content for verification.'
            }
          ]
        };
        
        localStorage.setItem('legalSubjects', JSON.stringify(sampleData));
        const retrieved = JSON.parse(localStorage.getItem('legalSubjects'));
        
        if (retrieved['Test Subject'] && retrieved['Test Subject'].length > 0) {
          testResults.push({
            name: 'Sample Data',
            status: 'PASS',
            message: 'Sample data can be stored and retrieved'
          });
        } else {
          testResults.push({
            name: 'Sample Data',
            status: 'FAIL',
            message: 'Sample data storage/retrieval failed'
          });
        }
      } catch (error) {
        testResults.push({
          name: 'Sample Data',
          status: 'ERROR',
          message: `Error: ${error.message}`
        });
      }
    }

    function testNavigation() {
      try {
        // Test if pages are accessible
        const resourcesUrl = 'resources.html';
        const dashboardUrl = 'dashboard.html';
        
        testResults.push({
          name: 'Navigation',
          status: 'INFO',
          message: 'Navigation URLs are properly configured'
        });
      } catch (error) {
        testResults.push({
          name: 'Navigation',
          status: 'ERROR',
          message: `Error: ${error.message}`
        });
      }
    }

    function displayTestResults() {
      const resultsDiv = document.getElementById('testResults');
      const summaryDiv = document.getElementById('testSummary');
      
      let resultsHTML = '<h3>Test Results:</h3>';
      let passed = 0;
      let failed = 0;
      let errors = 0;
      let info = 0;
      
      testResults.forEach(result => {
        const statusClass = result.status === 'PASS' ? 'success' : 
                           result.status === 'FAIL' ? 'error' : 
                           result.status === 'ERROR' ? 'error' : 'info';
        
        resultsHTML += `
          <div class="status ${statusClass}">
            <strong>${result.name}:</strong> ${result.status} - ${result.message}
          </div>
        `;
        
        if (result.status === 'PASS') passed++;
        else if (result.status === 'FAIL') failed++;
        else if (result.status === 'ERROR') errors++;
        else if (result.status === 'INFO') info++;
      });
      
      resultsDiv.innerHTML = resultsHTML;
      
      // Summary
      summaryDiv.innerHTML = `
        <div class="status info">
          <h4>Summary:</h4>
          <p>‚úÖ Passed: ${passed} | ‚ùå Failed: ${failed} | ‚ö†Ô∏è Errors: ${errors} | ‚ÑπÔ∏è Info: ${info}</p>
          <p>Total Tests: ${testResults.length}</p>
        </div>
      `;
    }

    function clearTestResults() {
      document.getElementById('testResults').innerHTML = '';
      document.getElementById('testSummary').innerHTML = '';
      testResults = [];
    }

    function testDemoMode() {
      const resultDiv = document.getElementById('demoTestResult');
      
      try {
        localStorage.setItem('demoMode', 'true');
        localStorage.setItem('legalSubjects', JSON.stringify({
          'Test Subject': [
            {
              id: Date.now(),
              topic: 'Test Topic',
              subtopic: 'Test Subtopic',
              caseSection: 'Test Case',
              content: 'Test content for verification.'
            }
          ]
        }));
        
        resultDiv.innerHTML = '<div class="status success">‚úÖ Demo mode activated successfully! Redirecting to dashboard...</div>';
        
        setTimeout(() => {
          window.location.href = 'dashboard.html';
        }, 2000);
        
      } catch (error) {
        resultDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
      }
    }

    function checkLocalStorage() {
      const resultDiv = document.getElementById('storageTestResult');
      
      try {
        const demoMode = localStorage.getItem('demoMode');
        const subjects = localStorage.getItem('legalSubjects');
        
        let status = '<div class="status info">';
        status += `<strong>Demo Mode:</strong> ${demoMode === 'true' ? '‚úÖ Active' : '‚ùå Not Active'}<br>`;
        status += `<strong>Subjects Data:</strong> ${subjects ? '‚úÖ Present' : '‚ùå Missing'}<br>`;
        
        if (subjects) {
          const parsedSubjects = JSON.parse(subjects);
          const subjectCount = Object.keys(parsedSubjects).length;
          const totalConcepts = Object.values(parsedSubjects).reduce((sum, concepts) => sum + concepts.length, 0);
          status += `<strong>Subject Count:</strong> ${subjectCount}<br>`;
          status += `<strong>Total Concepts:</strong> ${totalConcepts}<br>`;
        }
        
        status += '</div>';
        resultDiv.innerHTML = status;
        
      } catch (error) {
        resultDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
      }
    }

    function loadSampleData() {
      const resultDiv = document.getElementById('sampleDataResult');
      
      try {
        const sampleData = {
          'Contract Law': [
            {
              id: 1,
              topic: 'Contract Law',
              subtopic: 'Formation of Contract',
              caseSection: 'Carlill v Carbolic Smoke Ball Co [1893] 1 QB 256',
              content: 'An offer can be made to the world at large. The advertisement constituted a unilateral offer which could be accepted by anyone who performed the conditions.'
            }
          ],
          'Tort Law': [
            {
              id: 2,
              topic: 'Tort Law',
              subtopic: 'Negligence',
              caseSection: 'Donoghue v Stevenson [1932] AC 562',
              content: 'The neighbour principle: you must take reasonable care to avoid acts or omissions which you can reasonably foresee would be likely to injure your neighbour.'
            }
          ]
        };
        
        localStorage.setItem('legalSubjects', JSON.stringify(sampleData));
        
        resultDiv.innerHTML = '<div class="status success">‚úÖ Sample data loaded successfully! You can now test the tool with this data.</div>';
        
      } catch (error) {
        resultDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
      }
    }

    // Auto-run basic tests on page load
    window.addEventListener('load', () => {
      checkLocalStorage();
    });
  </script>
</body>
</html>



